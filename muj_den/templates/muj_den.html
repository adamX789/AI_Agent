<!DOCTYPE html>
{% load static %}
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M≈Øj den</title>
  <link rel="stylesheet" href="{% static 'muj_den.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mozilla+Text:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
 <!-- ‚úÖ Hamburger ikona -->
 <button class="hamburger" id="hamburger">‚ò∞</button>

 <!-- ‚úÖ Sidebar -->
 <aside class="sidebar" id="sidebar">
   <button class="close-btn" id="closeBtn">‚úñ</button>
       <nav class="nav-links">
      <a href="{% url 'profile' %}"><button class="nav-btn">Profil</button></a>
      <a href="{% url 'chat' %}"><button class="nav-btn">Chat</button></a>
      <a href="{% url 'my_day' %}"><button class="nav-btn">M≈Øj den</button></a>
    </nav>
    <a href="{% url 'logout' %}" style="width: 100%;"><button class="logout-btn">Odhl√°sit se</button></a>
 </aside>

  <!-- ‚úÖ Main Content -->
  <main class="profile">
    <h1 class="username">M≈Øj den</h1>

    <!-- ‚úÖ Denn√≠ c√≠le -->
    <section class="stats">
      <h2>Dne≈°n√≠ c√≠l:</h2>
      <ul>
        <li>Denn√≠ p≈ô√≠jem Kcal: <span>{{celkove_info.celkove_k|stringformat:'.0f'}} / {{denni_info.denni_k}}</span></li>
        <li>B√≠lkoviny: <span>{{celkove_info.celkove_b|stringformat:'.2f'}} g / {{denni_info.denni_b}} g</span></li>
        <li>Sacharidy: <span>{{celkove_info.celkove_s|stringformat:'.2f'}} g / {{denni_info.denni_s}} g</span></li>
        <li>Tuky: <span>{{celkove_info.celkove_t|stringformat:'.2f'}} g / {{denni_info.denni_t}} g</span></li>
        <li>Pitn√Ω re≈æim: <span>0 l / {{denni_info.pitny_rezim}} l</span></li>
      </ul>
    </section>

    <!-- ‚úÖ P≈ôep√≠n√°n√≠ -->
    <section class="switcher">
      <div class="tabs">
        <button class="tab-btn active" data-target="recipes">Dne≈°n√≠ j√≠deln√≠ƒçek</button>
        <button class="tab-btn" data-target="foods">Dne≈°n√≠ z√°znam potravin</button>
      </div>

  <!-- ‚úÖ Recepty -->
<div id="recipes" class="tab-content active">
  <form action="" method="POST">
    {% csrf_token %}
    <div class="meal">
      <h3>Sn√≠danƒõ</h3>
      {% if not vybrane_recepty.snidane_snezena %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_snidani.all %}
          <span class="dot {% if recept.id == vybrane_recepty.snidane.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_snidani.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.snidane.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="snidane_recept_id" value="{{recept.id}}">
        <button class="switch-recipe" type="button">üîÑ Jin√Ω recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="snidane">‚úÖ Snƒõdl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">Snidani uz jste dnes snedl!</p>
      {% endif %}
    </div>
  
    <div class="meal">
      <h3>Svaƒçina</h3>
      <div class="dots">
        {% for recept in jidelnicek.seznam_svacin1.all %}
        <span class="dot {% if recept.id == vybrane_recepty.svacina1.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_svacin1.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.svacina1.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <button class="switch-recipe" type="button">üîÑ Jin√Ω recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="svacina1">‚úÖ Snƒõdl jsem</button>
      </div>
    </div>
  
    <div class="meal">
      <h3>Obƒõd</h3>
      <div class="dots">
        {% for recept in jidelnicek.seznam_obedu.all %}
        <span class="dot {% if recept.id == vybrane_recepty.obed.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_obedu.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.obed.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <button class="switch-recipe" type="button">üîÑ Jin√Ω recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="obed">‚úÖ Snƒõdl jsem</button>
      </div>
    </div>
  
    <div class="meal">
      <h3>Svaƒçina</h3>
      <div class="dots">
        {% for recept in jidelnicek.seznam_svacin2.all %}
        <span class="dot {% if recept.id == vybrane_recepty.svacina2.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_svacin2.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.svacina2.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <button class="switch-recipe" type="button">üîÑ Jin√Ω recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="svacina2">‚úÖ Snƒõdl jsem</button>
      </div>
    </div>
  
    <div class="meal">
      <h3>Veƒçe≈ôe</h3>
      <div class="dots">
        {% for recept in jidelnicek.seznam_veceri.all %}
        <span class="dot {% if recept.id == vybrane_recepty.vecere.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_veceri.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.vecere.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <button class="switch-recipe" type="button">üîÑ Jin√Ω recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="vecere">‚úÖ Snƒõdl jsem</button>
      </div>
    </div>
  </form>
</div>

<!-- ‚úÖ Dne≈°n√≠ potraviny -->
<div id="foods" class="tab-content">
  <form action="" method="POST">
    {% csrf_token %}
    <ul class="foods-list">
      {% if potraviny %}
      {% for potravina in potraviny %}
        <li>{{potravina.nazev}} {{potravina.hmotnost|stringformat:'.1f'}}{{potravina.jednotka}} <button class="delete-btn" name="delete" value="del{{potravina.id}}">√ó</button></li>
      {% endfor %}
      {% else %}
      <h4>Dnes jste nesnƒõdl ≈æ√°dn√© potraviny.</h4>
      {% endif %}
    </ul>
  </form>
</div>
  

<script src="{% static 'main.js' %}"></script>
<script src="{% static 'chat.js' %}"></script>


</body>
</html>
