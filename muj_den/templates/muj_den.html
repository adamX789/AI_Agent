<!DOCTYPE html>
{% load static %}
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MÅ¯j den</title>
  <link rel="stylesheet" href="{% static 'muj_den.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mozilla+Text:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
 <!-- âœ… Hamburger ikona -->
 <button class="hamburger" id="hamburger">â˜°</button>

 <!-- âœ… Sidebar -->
 <aside class="sidebar" id="sidebar">
   <button class="close-btn" id="closeBtn">âœ–</button>
   <img src="{% static 'images/Logo bez textu.png' %}" alt="">
    <nav class="nav-links">
      <a href="{% url 'profile' %}"><button class="nav-btn">Profil</button></a>
      <a href="{% url 'chat' %}"><button class="nav-btn">Chat</button></a>
      <a href="{% url 'my_day' %}"><button class="nav-btn">MÅ¯j den</button></a>
    </nav>
    <a href="{% url 'logout' %}" style="width: 100%;"><button class="logout-btn">OdhlÃ¡sit se</button></a>
 </aside>

  <!-- âœ… Main Content -->
  <main class="profile">
    <h1 class="username">MÅ¯j den</h1>

    <a href="{% url 'add' %}"><button class="add-btn" data-target="recipes">+ PÅ™idat zÃ¡znam</button></a>

    <!-- âœ… DennÃ­ cÃ­le -->
    <section class="stats">
      <h2>DneÅ¡nÃ­ cÃ­l:</h2>
      <ul>
        <li>DennÃ­ pÅ™Ã­jem Kcal: <span>{{celkove_info.celkove_k|stringformat:'.0f'}} / {{denni_info.denni_k}}</span></li>
        <li>BÃ­lkoviny: <span>{{celkove_info.celkove_b|stringformat:'.2f'}} g / {{denni_info.denni_b}} g</span></li>
        <li>Sacharidy: <span>{{celkove_info.celkove_s|stringformat:'.2f'}} g / {{denni_info.denni_s}} g</span></li>
        <li>Tuky: <span>{{celkove_info.celkove_t|stringformat:'.2f'}} g / {{denni_info.denni_t}} g</span></li>
        <li>PitnÃ½ reÅ¾im: <span>0 l / {{denni_info.pitny_rezim}} l</span></li>
      </ul>
    </section>

    <!-- âœ… PÅ™epÃ­nÃ¡nÃ­ -->
    <section class="switcher">
      <div class="tabs">
        <button class="tab-btn active" data-target="recipes">DneÅ¡nÃ­ jÃ­delnÃ­Äek</button>
        <button class="tab-btn" data-target="foods">DneÅ¡nÃ­ zÃ¡znam potravin</button>
      </div>

  <!-- âœ… Recepty -->
<div id="recipes" class="tab-content active">
  <form action="" method="POST">
    {% csrf_token %}
    <div class="meal">
      <h3>SnÃ­danÄ›</h3>
      {% if not vybrane_recepty.snidane_snezena %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_snidani.all %}
          <span class="dot {% if recept.id == vybrane_recepty.snidane.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_snidani.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.snidane.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="snidane_recept_id" value="{{vybrane_recepty.snidane.id}}">
        <button class="switch-recipe" type="button">ğŸ”„ JinÃ½ recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="snidane">âœ… SnÄ›dl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">SnÃ­dani uÅ¾ jste dnes snÄ›dl!</p>
      {% endif %}
      </form>
    </div>
  
    <div class="meal">
      <form action="" method="POST">
        {% csrf_token %}
      <h3>SvaÄina</h3>
      {% if not vybrane_recepty.svacina1_snezena %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_svacin1.all %}
        <span class="dot {% if recept.id == vybrane_recepty.svacina1.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_svacin1.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.svacina1.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="svacina1_recept_id" value="{{vybrane_recepty.svacina1.id}}">
        <button class="switch-recipe" type="button">ğŸ”„ JinÃ½ recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="svacina1">âœ… SnÄ›dl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">SvaÄinu uÅ¾ jste dnes snÄ›dl!</p>
      {% endif %}
      </form>
    </div>
  
    <div class="meal">
      <form action="" method="POST">
        {% csrf_token %}
      <h3>ObÄ›d</h3>
      {% if not vybrane_recepty.obed_snezen %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_obedu.all %}
        <span class="dot {% if recept.id == vybrane_recepty.obed.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_obedu.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.obed.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="obed_recept_id" value="{{vybrane_recepty.obed.id}}">
        <button class="switch-recipe" type="button">ğŸ”„ JinÃ½ recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="obed">âœ… SnÄ›dl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">ObÄ›d uÅ¾ jste dnes snÄ›dl!</p>
      {% endif %}
      </form>
    </div>
  
    <div class="meal">
      <h3>SvaÄina</h3>
      {% if not vybrane_recepty.svacina2_snezena %}
      <form action="" method="POST">
        {% csrf_token %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_svacin2.all %}
        <span class="dot {% if recept.id == vybrane_recepty.svacina2.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_svacin2.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.svacina2.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="svacina2_recept_id" value="{{vybrane_recepty.svacina2.id}}">
        <button class="switch-recipe" type="button">ğŸ”„ JinÃ½ recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="svacina2">âœ… SnÄ›dl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">SvaÄinu uÅ¾ jste dnes snÄ›dl!</p>
      {% endif %}
      </form>
    </div>
  
    <div class="meal">
      <form action="" method="POST">
        {% csrf_token %}
      <h3>VeÄeÅ™e</h3>
      {% if not vybrane_recepty.vecere_snezena %}
      <div class="dots">
        {% for recept in jidelnicek.seznam_veceri.all %}
        <span class="dot {% if recept.id == vybrane_recepty.vecere.id %}active{% endif %}"></span>
        {% endfor %}
      </div>
      {% for recept in jidelnicek.seznam_veceri.all %}
        <div class="recipe {% if recept.id == vybrane_recepty.vecere.id %}active{% else %}hidden{% endif %}" data-recept-id="{{recept.id}}">
        <p class="recipe-text" name="recept" value="{{recept.id}}">{{recept.nazev}} ({% for item in recept.ingredience %}{{item.mnozstvi}} {{item.nazev}}{% if not forloop.last %}, {% endif %}{% endfor %})</p>
        </div>
      {% endfor %}
      <div class="actions">
        <input type="hidden" name="recept_id" id="vecere_recept_id" value="{{vybrane_recepty.vecere.id}}">
        <button class="switch-recipe" type="button">ğŸ”„ JinÃ½ recept</button>
        <button class="eat-btn" type="submit" name="snedl_jsem" value="vecere">âœ… SnÄ›dl jsem</button>
      </div>
      {% else %}
      <p class="recipe-text">VeÄeÅ™i uÅ¾ jste dnes snÄ›dl!</p>
      {% endif %}
      </form>
    </div>
</div>

<!-- âœ… DneÅ¡nÃ­ potraviny -->
<div id="foods" class="tab-content">
  <form action="" method="POST">
    {% csrf_token %}
    <ul class="foods-list">
      {% if potraviny %}
      {% for potravina in potraviny %}
        <li>{{potravina.nazev}} {{potravina.hmotnost|stringformat:'.1f'}}{{potravina.jednotka}} <button class="delete-btn" name="delete" value="del{{potravina.id}}">Ã—</button></li>
      {% endfor %}
      {% else %}
      <h4>Dnes jste nesnÄ›dl Å¾Ã¡dnÃ© potraviny.</h4>
      {% endif %}
    </ul>
  </form>
</div>
  

<script src="{% static 'main.js' %}"></script>
<script src="{% static 'chat.js' %}"></script>


</body>
</html>
